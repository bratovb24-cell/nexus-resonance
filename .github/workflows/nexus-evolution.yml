name: NEXUS Evolution Pipeline

on:
  schedule:
    # ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ‡Ð°Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ñ†Ð¸ÐºÐ» ÑÐ²Ð¾Ð»ÑŽÑ†Ð¸Ð¸
    - cron: '0 * * * *'
  workflow_dispatch:
    inputs:
      cycles:
        description: 'Number of evolution cycles to run'
        required: false
        default: '1'

env:
  PYTHONUNBUFFERED: 1

jobs:
  evolve:
    name: Run Evolution Cycle
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python 3.11
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install requests

      - name: Run Evolution Pipeline
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo "ðŸ§¬ NEXUS Evolution Pipeline Starting..."
          echo "========================================"
          echo ""
          echo "This pipeline runs:"
          echo "  1. Analyzer Agent - finds problems"
          echo "  2. Developer Agent - creates fixes"
          echo "  3. (Future) Tester Agent - validates"
          echo "  4. (Future) Merger Agent - auto-merges"
          echo ""
          echo "========================================"

          python3 nexus_agents/evo_core.py

          echo ""
          echo "========================================"
          echo "âœ… Evolution cycle completed!"

      - name: Calculate Ï† improvement
        if: always()
        run: |
          echo "ðŸ“Š Ï†-metric tracking:"
          echo "   Before: 0.18"
          echo "   After: TBD (measured in next cycle)"
          echo ""
          echo "ðŸŽ¯ Target: Ï† > 0.25 after 7 days of evolution"
